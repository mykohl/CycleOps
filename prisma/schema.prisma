// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Cyclist {
  id Int @id @default(autoincrement())
  Owns PartOwned[]
}

model PartOwned {
  id Int @id @default(autoincrement())
  acquired DateTime?
  condition String?
  owner Cyclist? @relation(fields: [ownerId], references: [id])
  ownerId Int?
  part Part? @relation(fields: [partId], references: [id])
  partId Int?
}

model Bicycle {
  id Int @id @default(autoincrement())
  parts BicyclePart[]
}

model BicyclePart {
  id Int @id @default(autoincrement())
  bicycle Bicycle? @relation(fields: [bicycleId], references: [id])
  bicycleId Int?
  part Part? @relation(fields: [partId], references: [id])
  partId Int?
}

model Maker {
  id Int @id @default(autoincrement())
  name String?
  parts Part[]
}

model Part {
  id Int @id @default(autoincrement())
  type String?
  name String?
  maker Maker? @relation(fields: [makerId], references: [id])
  makerId Int?
  owners PartOwned[]
  bicycles BicyclePart[]
  hub PartHub?
  rim PartRim?
}

model PartHub {
  id Int @id @default(autoincrement())
  part Part? @relation(fields: [partId], references: [id])
  partId Int? @unique
  specOLD Float?
  specFlangeDiameterLeft Float?
  specFlangeDiameterRight Float?
  specFlangeLeftToCenter Float?
  specFlangeRightToCenter Float?
  specFlangeLeftToOLN Float?
  specFlangeRightToOLN Float?
  specSpokeHoleDiameter Float?
  wheels Wheel[]
}

model PartRim {
  id Int @id @default(autoincrement())
  part Part? @relation(fields: [partId], references: [id])
  partId Int? @unique
  specEffectiveDiameter Float?
  specWidthInternal Float?
  specWidthExternal Float?
  specSectionHeight Float?
  wheels Wheel[]
}

model Wheel {
  id Int @id @default(autoincrement())
  name String?
  hub PartHub? @relation(fields: [hubId], references: [id])
  hubId Int?
  rim PartRim? @relation(fields: [rimId], references: [id])
  rimId Int?
  WheelsFoward Wheelset[] @relation("wheelFoward")
  WheelsBack Wheelset[] @relation("wheelBack")
}

model Wheelset {
  id Int @id @default(autoincrement())
  name String?
  wheelFoward Wheel? @relation("wheelFoward", fields: [wheelFowardId], references: [id])
  wheelFowardId Int?
  wheelBack Wheel? @relation("wheelBack", fields: [WheelBackId], references: [id])
  WheelBackId Int?
}